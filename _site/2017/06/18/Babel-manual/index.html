<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>babel 指南</title>

	<link rel="shortcut icon" href="/styles/images/favicon.jpg">
	<link rel="icon" href="/styles/images/favicon.jpg">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/rouge.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="canonical" href="/2017/06/18/Babel-manual/">
	<link rel="alternate" type="application/rss+xml" title="意气而已" href="/feed.xml">

	<meta name="keywords" content="babel 指南, 意气而已, Jason;blog;日记;IT;">	
	<meta name="description" content="Jason;blog;日记;IT;">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src =  "https://hm.baidu.com/hm.js?bc6f1c7c413b46c959303e3bedb94778";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.jpg">
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/categories/">大类分解</a>
        </li>
        <li>
          <a href="/tag">小类内聚</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li>      
		<li>
          <a href="/donate/"><strong>打赏</strong></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/youjiuzidangge/youjiuzidangge.github.io">Github</a></li>
            <!--<li><a rel="nofollow" target="_blank" href="">关于作者</a></li>-->
            <li><a rel="nofollow" href="/about_author">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <li><a href="/feed.xml">RSS订阅</a></li>
            <li class="divider"></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/luoyan35714/LessOrMore.git">本项目</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>babel 指南</h1>
		    <p>Post on Jun 18, 2017 by <a href="/about">Jason Li</a></p>
		-->
		    <h1>Don't do or do your best.</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#Babel-ref">Babel</a>	/
    	<a href="/tag/#技术文档-ref">技术文档</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2025">2025</a>
          <ul class="nav">
            <li><a href="#month_2025_May">May</a></li>
      

      
        
            </ul>
          </li>
          <li><a href="#year_2018">2018</a>
            <ul class="nav">
              <li><a href="#month_2018_June">June</a></li>
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2018_May">May</a></li>
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2017">2017</a>
            <ul class="nav">
              <li><a href="#month_2017_November">November</a></li>
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_October">October</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_August">August</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_July">July</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_June">June</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_May">May</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_April">April</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_January">January</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2016">2016</a>
            <ul class="nav">
              <li><a href="#month_2016_December">December</a></li>
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">babel 指南</h1>
              <!--
                <p class="post-meta">Jun 18, 2017</p>
              -->
              <div class="meta">Posted on <span class="postdate">Jun 18, 2017</span> By <a target="_blank" href="http://localhost:4000">Jason Li</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#介绍" id="markdown-toc-介绍">介绍</a></li>
  <li><a href="#安装-babel" id="markdown-toc-安装-babel">安装 Babel</a>    <ul>
      <li><a href="#babel-cli" id="markdown-toc-babel-cli">babel-cli</a>        <ul>
          <li><a href="#在项目内运行-babel-cli" id="markdown-toc-在项目内运行-babel-cli">在项目内运行 Babel CLI</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#babel-node" id="markdown-toc-babel-node">babel-node</a></li>
  <li><a href="#babel-core" id="markdown-toc-babel-core">babel-core</a>    <ul>
      <li><a href="#配置-babel" id="markdown-toc-配置-babel">配置 Babel</a></li>
    </ul>
  </li>
  <li><a href="#babelrc" id="markdown-toc-babelrc">.babelrc</a></li>
  <li><a href="#babel-preset-es2015" id="markdown-toc-babel-preset-es2015">babel-preset-es2015</a></li>
  <li><a href="#babel-polyfill" id="markdown-toc-babel-polyfill">babel-polyfill</a>    <ul>
      <li><a href="#配置-babel进阶" id="markdown-toc-配置-babel进阶">配置 Babel（进阶）</a></li>
    </ul>
  </li>
  <li><a href="#手动指定插件" id="markdown-toc-手动指定插件">手动指定插件</a></li>
  <li><a href="#插件选项" id="markdown-toc-插件选项">插件选项</a></li>
  <li><a href="#静态分析工具" id="markdown-toc-静态分析工具">静态分析工具</a></li>
  <li><a href="#语法检查linting" id="markdown-toc-语法检查linting">语法检查（Linting）</a>    <ul>
      <li><a href="#代码风格" id="markdown-toc-代码风格">代码风格</a></li>
      <li><a href="#文档" id="markdown-toc-文档">文档</a></li>
      <li><a href="#框架" id="markdown-toc-框架">框架</a></li>
    </ul>
  </li>
</ul>

<p>之前为了配置 babel，参考其他博客的文章，但因为一点小小的错误怎么都配置不对，因为也不了解 babel 所以也不知道哪里错了，也不敢瞎改。白白耽误了
很长时间。后来突然灵机闪现，为什么不直接快速学习一下 babel 呢？结果顿时有茅塞顿开之感。本文主要是转载
<a href="https://shenbao.github.io/ishehui/html/React/Babel%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html">ISH的博客内容</a></p>

<hr />

<h2 id="介绍">介绍</h2>

<p>Babel 是一个通用的多用途 JavaScript 编译器（Babel is a JavaScript compiler.）。通过 Babel 你可以使用（并创建）下一代的 JavaScript，以及下一代的 JavaScript 工具。</p>

<p>作为一种语言，JavaScript 在不断发展，新的标准／提案和新的特性层出不穷。 在得到广泛普及之前，Babel 能够让你提前（甚至数年）使用它们。</p>

<p>Babel 把用最新标准编写的 JavaScript 代码向下编译成可以在今天随处可用的版本。 这一过程叫做“源码到源码”编译， 也被称为转换编译（transpiling，是一个自造合成词，即转换＋编译。以下也简称为转译）。</p>

<p>例如，Babel 能够将新的 ES2015 箭头函数语法：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">=&gt;</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span><span class="p">;</span>
</code></pre></div></div>
<p>转译为：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="kd">function</span> <span class="nf">square</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span><span class="p">;</span>
	<span class="p">};</span>
</code></pre></div></div>
<p>不过 Babel 的用途并不止于此，它支持语法扩展，能支持像 React 所用的 JSX 语法，同时还支持用于静态类型检查的流式语法（Flow Syntax）。</p>

<p>更重要的是，Babel 的一切都是简单的插件，谁都可以创建自己的插件，利用 Babel 的全部威力去做任何事情。</p>

<p>再进一步，Babel 自身被分解成了数个核心模块，任何人都可以利用它们来创建下一代的 JavaScript 工具。</p>

<p>已经有很多人都这样做了，围绕着 Babel 涌现出了非常大规模和多样化的生态系统。 在这本手册中，我将介绍如何使用 Babel 的内建工具以及一些来自于社区的非常有用的东西。</p>

<h1 id="安装-babel">安装 Babel</h1>

<p>由于 JavaScript 社区没有统一的构建工具、框架、平台等等，因此 Babel 正式集成了对所有主流工具的支持。 从 Gulp 到 Browserify，从 Ember 到 Meteor，不管你的环境设置如何，Babel 都有正式的集成支持。</p>

<p>本手册的目的主要是介绍 Babel 内建方式的安装，不过你可以访问交互式的安装页面来查看其它的整合方式。</p>

<blockquote>
  <p>注意： 本手册将涉及到一些命令行工具如 node 和 npm。在继续阅读之前请确保你已经熟悉这些工具了。</p>
</blockquote>

<h3 id="babel-cli">babel-cli</h3>

<p>Babel 的 CLI 是一种在命令行下使用 Babel 编译文件的简单方法。</p>

<p>让我们先全局安装它来学习基础知识。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nb">global</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">cli</span>
</code></pre></div></div>
<p>我们可以这样来编译我们的第一个文件：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">babel</span> <span class="nx">my</span><span class="o">-</span><span class="nx">file</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div></div>
<p>这将把编译后的结果直接输出至终端。使用 –out-file 或着 -o 可以将结果写入到指定的文件。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">babel</span> <span class="nx">example</span><span class="p">.</span><span class="nx">js</span> <span class="o">--</span><span class="nx">out</span><span class="o">-</span><span class="nx">file</span> <span class="nx">compiled</span><span class="p">.</span><span class="nx">js</span>
	<span class="err">#</span> <span class="nx">或</span>
	<span class="nx">$</span> <span class="nx">babel</span> <span class="nx">example</span><span class="p">.</span><span class="nx">js</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">compiled</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div></div>
<p>如果我们想要把一个目录整个编译成一个新的目录，可以使用 –out-dir 或者 -d。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">babel</span> <span class="nx">src</span> <span class="o">--</span><span class="nx">out</span><span class="o">-</span><span class="nx">dir</span> <span class="nx">lib</span>
	<span class="err">#</span> <span class="nx">或</span>
	<span class="nx">$</span> <span class="nx">babel</span> <span class="nx">src</span> <span class="o">-</span><span class="nx">d</span> <span class="nx">lib</span>
</code></pre></div></div>
<h4 id="在项目内运行-babel-cli">在项目内运行 Babel CLI</h4>

<p>尽管你可以把 Babel CLI 全局安装在你的机器上，但是按项目安装会更好。</p>

<p>有两个主要的原因。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">在同一台机器上的不同项目或许会依赖不同版本的</span> <span class="nx">Babel</span> <span class="nx">并允许你有选择的更新</span><span class="err">。</span>
    <span class="nx">这意味着你对工作环境没有隐式依赖</span><span class="err">，</span><span class="nx">这让你的项目有很好的可移植性并且易于安装</span><span class="err">。</span>
</code></pre></div></div>
<p>要在（项目）本地安装 Babel CLI 可以运行：</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">注意</span><span class="err">：</span><span class="nx">由于全局运行</span> <span class="nx">Babel</span> <span class="nx">是一个坏习惯</span><span class="err">，</span><span class="nx">如果你要卸载全局安装的版本可以运行</span><span class="err">：</span><span class="nx">npm</span> <span class="nx">uninstall</span> <span class="o">--</span><span class="nb">global</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">cli</span><span class="err">。</span><span class="p">.</span>
</code></pre></div></div>
<p>安装完成后，你的 package.json 应该如下所示：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="p">{</span>
	  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-project</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
	  <span class="dl">"</span><span class="s2">devDependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
		<span class="dl">"</span><span class="s2">babel-cli</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^6.0.0</span><span class="dl">"</span>
	  <span class="p">}</span>
	<span class="p">}</span>
</code></pre></div></div>
<p>现在，我们不直接从命令行运行 Babel 了，取而代之我们将把运行命令写在 npm scripts 里，这样可以使用 Babel 的本地版本。</p>

<p>只需将 “scripts” 字段添加到你的 package.json 文件内并且把 babel 命令写成 build 字段。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-project</span><span class="dl">"</span><span class="p">,</span>
		<span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
	<span class="o">+</span>   <span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">build</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">babel src -d lib</span><span class="dl">"</span>
	<span class="o">+</span>   <span class="p">},</span>
		<span class="dl">"</span><span class="s2">devDependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
		  <span class="dl">"</span><span class="s2">babel-cli</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^6.0.0</span><span class="dl">"</span>
		<span class="p">}</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>现在可以在终端里运行：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">npm</span> <span class="nx">run</span> <span class="nx">build</span>
</code></pre></div></div>
<p>这将以与之前同样的方式运行 Babel，但这一次我们使用的是本地副本。</p>

<h1 id="babel-node">babel-node</h1>

<p>如果你要用 node CLI 来运行代码，那么整合 Babel 最简单的方式就是使用 babel-node CLI，它是 node CLI 的替代品。</p>

<p>但请注意这种方法并不适合正式产品环境使用。 直接部署用此方式编译的代码不是好的做法。 在部署之前预先编译会更好。 不过用在构建脚本或是其他本地运行的脚本中是非常合适的。</p>

<p>首先确保 babel-cli 已经安装了。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">cli</span>

    <span class="nx">注意</span><span class="err">：</span><span class="nx">如果你不清楚为什么要安装在本地</span><span class="err">，</span><span class="nx">请阅读上面在项目内运行</span> <span class="nx">Babel</span> <span class="nx">CLI</span> <span class="nx">的部分</span><span class="err">。</span>
</code></pre></div></div>
<p>然后用 babel-node 来替代 node 运行所有的代码 。.</p>

<p>如果用 npm scripts 的话只需要这样做：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">-</span>     <span class="dl">"</span><span class="s2">script-name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">node script.js</span><span class="dl">"</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">script-name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">babel-node script.js</span><span class="dl">"</span>
		<span class="p">}</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>要不然的话你需要写全 babel-node 的路径。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="o">-</span> <span class="nx">node</span> <span class="nx">script</span><span class="p">.</span><span class="nx">js</span>
	<span class="o">+</span> <span class="p">.</span><span class="o">/</span><span class="nx">node_modules</span><span class="o">/</span><span class="p">.</span><span class="nx">bin</span><span class="o">/</span><span class="nx">babel</span><span class="o">-</span><span class="nx">node</span> <span class="nx">script</span><span class="p">.</span><span class="nx">js</span>
</code></pre></div></div>
<blockquote>
  <p>提示：你可以使用 npm-run。.</p>
</blockquote>

<h1 id="babel-core">babel-core</h1>

<p>如果你需要以编程的方式来调用Babel的API进行转码，就可以使用 babel-core 这个模块。</p>

<p>我们首先来安装 babel-core。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">core</span>

    <span class="kd">var</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">babel-core</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>
<p>字符串形式的 JavaScript 代码可以直接使用 babel.transform 来编译。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">babel</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="dl">"</span><span class="s2">code();</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
	<span class="c1">// =&gt; { code, map, ast }</span>
</code></pre></div></div>
<p>如果是文件的话，可以使用异步 api：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">babel</span><span class="p">.</span><span class="nf">transformFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">filename.js</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
	  <span class="nx">result</span><span class="p">;</span> <span class="c1">// =&gt; { code, map, ast }</span>
	<span class="p">});</span>
</code></pre></div></div>
<p>或者是同步 api：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">babel</span><span class="p">.</span><span class="nf">transformFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">filename.js</span><span class="dl">"</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
	<span class="c1">// =&gt; { code, map, ast }</span>
</code></pre></div></div>
<p>要是已经有一个 Babel AST（抽象语法树）了就可以直接从 AST 进行转换。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">babel</span><span class="p">.</span><span class="nf">transformFromAst</span><span class="p">(</span><span class="nx">ast</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
	<span class="c1">// =&gt; { code, map, ast }</span>
</code></pre></div></div>
<p>对于上述所有方法，options 指的都是 http://babeljs.io/docs/usage/options/</p>

<h2 id="配置-babel">配置 Babel</h2>

<p>你或许已经注意到了，目前为止通过运行 Babel 自己我们并没能“翻译”代码，而仅仅是把代码从一处拷贝到了另一处。</p>

<p>这是因为我们还没告诉 Babel 要做什么。</p>

<blockquote>
  <p>由于 Babel 是一个可以用各种花样去使用的通用编译器，因此默认情况下它反而什么都不做。你必须明确地告诉 Babel 应该要做什么。</p>
</blockquote>

<p>你可以通过安装插件（plugins）或预设（presets，也就是一组插件）来指示 Babel 去做什么事情。（所谓的 presets 其实就是一些同类plugin打包的结果，方便进行添加）</p>

<h1 id="babelrc">.babelrc</h1>

<p>在我们告诉 Babel 该做什么之前，我们需要创建一个配置文件。你需要做的就是在项目的根路径下创建 .babelrc 文件。然后输入以下内容作为开始：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="p">{</span>
	  <span class="dl">"</span><span class="s2">presets</span><span class="dl">"</span><span class="p">:</span> <span class="p">[],</span>
	  <span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[]</span>
	<span class="p">}</span>
</code></pre></div></div>
<p>这个文件就是用来让 Babel 做你要它做的事情的配置文件。</p>

<blockquote>
  <p>注意：尽管你也可以用其他方式给 Babel 传递选项，但 .babelrc 文件是约定也是最好的方式。</p>
</blockquote>

<h1 id="babel-preset-es2015">babel-preset-es2015</h1>

<p>我们先从让 Babel 把 ES2015（最新版本的 JavaScript 标准，也叫做 ES6）编译成 ES5（现今在大多数 JavaScript 环境下可用的版本）开始吧。</p>

<p>我们需要安装 “es2015” Babel 预设：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">es2015</span>
</code></pre></div></div>
<p>我们修改 .babelrc 来包含这个预设。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">presets</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">es2015</span><span class="dl">"</span>
		<span class="p">],</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>babel-preset-react
===========================================</p>

<p>设置 React 一样容易。只需要安装这个预设：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">react</span>
</code></pre></div></div>
<p>然后在 .babelrc 文件里补充：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">presets</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
		  <span class="dl">"</span><span class="s2">es2015</span><span class="dl">"</span><span class="p">,</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span>
		<span class="p">],</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>babel-preset-stage-x
=============================================</p>

<p>JavaScript 还有一些提案，正在积极通过 TC39（ECMAScript 标准背后的技术委员会）的流程成为标准的一部分。</p>

<p>这个流程分为 5（0－4）个阶段。 随着提案得到越多的关注就越有可能被标准采纳，于是他们就继续通过各个阶段，最终在阶段 4 被标准正式采纳。</p>

<p>以下是4 个不同阶段的（打包的）预设：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">stage</span><span class="o">-</span><span class="mi">0</span>
    <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">stage</span><span class="o">-</span><span class="mi">1</span>
    <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">stage</span><span class="o">-</span><span class="mi">2</span>
    <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">stage</span><span class="o">-</span><span class="mi">3</span>
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>注意 stage-4 预设是不存在的因为它就是上面的 es2015 预设。
</code></pre></div></div>

<p>以上每种预设都依赖于紧随的后期阶段预设。例如，babel-preset-stage-1 依赖 babel-preset-stage-2，后者又依赖 babel-preset-stage-3。.</p>

<p><code class="language-plaintext highlighter-rouge">Stage 0：</code></p>

<ul>
  <li>Function Bind Syntax：函数的绑定运算符</li>
  <li>String.prototype.at：字符串的静态方法at</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Stage 1：</code></p>

<ul>
  <li>Class and Property Decorators：Class的修饰器</li>
  <li>Class Property Declarations：Class的属性声明</li>
  <li>Additional export-from Statements：export的写法改进</li>
  <li>String.prototype.{trimLeft,trimRight}：字符串删除头尾空格的方法</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Stage 2：</code></p>

<ul>
  <li>Rest/Spread Properties：对象的Rest参数和扩展运算符</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Stage 3</code></p>

<ul>
  <li>SIMD API：“单指令，多数据”命令集</li>
  <li>Async Functions：async函数</li>
  <li>Object.values/Object.entries：Object的静态方法values()和entries()</li>
  <li>String padding：字符串长度补全</li>
  <li>Trailing commas in function parameter lists and calls：函数参数的尾逗号</li>
  <li>Object.getOwnPropertyDescriptors：Object的静态方法getOwnPropertyDescriptors</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Stage 4：</code></p>

<ul>
  <li>Array.prototype.includes：数组实例的includes方法</li>
  <li>Exponentiation Operator：指数运算符</li>
</ul>

<p>使用的时候只需要安装你想要的阶段就可以了：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">stage</span><span class="o">-</span><span class="mi">2</span>
</code></pre></div></div>
<p>然后添加进你的 .babelrc 配置文件。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">presets</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
		  <span class="dl">"</span><span class="s2">es2015</span><span class="dl">"</span><span class="p">,</span>
		  <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">,</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">stage-2</span><span class="dl">"</span>
		<span class="p">],</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>执行 Babel 生成的代码
——————————————————-</p>

<p>即便你已经用 Babel 编译了你的代码，但这还不算完。</p>

<h1 id="babel-polyfill">babel-polyfill</h1>

<p>Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如Object.assign）都不会转码。Babel默认不转码的API非常多，详细清单可以查看definitions.js文件。</p>

<p>举例来说，ES6在Array对象上新增了Array.from方法。Babel就不会转码这个方法。如果想让这个方法运行，必须使用babel-polyfill，为当前环境提供一个垫片。</p>

<p>比方说，我们需要编译以下代码：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">function</span> <span class="nf">addAll</span><span class="p">()</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">);</span>
	<span class="p">}</span>
</code></pre></div></div>
<p>最终会变成这样：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">function</span> <span class="nf">addAll</span><span class="p">()</span> <span class="p">{</span>
	  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nf">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
	  <span class="p">});</span>
	<span class="p">}</span>
</code></pre></div></div>
<p>然而，它依然无法随处可用因为不是所有的 JavaScript 环境都支持 Array.from。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">Uncaught</span> <span class="nx">TypeError</span><span class="p">:</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span> <span class="nx">is</span> <span class="nx">not</span> <span class="nx">a</span> <span class="kd">function</span>
</code></pre></div></div>
<p>为了解决这个问题，我们使用一种叫做 Polyfill（代码填充，也可译作兼容性补丁） 的技术。 简单地说，polyfill 即是在当前运行环境中用来复制（意指模拟性的复制，而不是拷贝）尚不存在的原生 api 的代码。 能让你提前使用还不可用的 APIs，Array.from 就是一个例子。</p>

<p>Babel 用了优秀的 core-js 用作 polyfill，并且还有定制化的 regenerator 来让 generators（生成器）和 async functions（异步函数）正常工作。</p>

<p>要使用 Babel polyfill，首先用 npm 安装它：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">polyfill</span>
</code></pre></div></div>
<p>然后只需要在文件顶部导入 polyfill 就可以了：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">import</span> <span class="dl">"</span><span class="s2">babel-polyfill</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>
<p>babel-runtime
=============================================</p>

<p>为了实现 ECMAScript 规范的细节，Babel 会使用“助手”方法来保持生成代码的整洁。</p>

<p>由于这些助手方法可能会特别长并且会被添加到每一个文件的顶部，因此你可以把它们统一移动到一个单一的“运行时（runtime）”中去。</p>

<p>通过安装 babel-plugin-transform-runtime 和 babel-runtime 来开始。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">plugin</span><span class="o">-</span><span class="nx">transform</span><span class="o">-</span><span class="nx">runtime</span>
	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">runtime</span>
</code></pre></div></div>
<p>然后更新 .babelrc：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">transform-runtime</span><span class="dl">"</span><span class="p">,</span>
		  <span class="dl">"</span><span class="s2">transform-es2015-classes</span><span class="dl">"</span>
		<span class="p">]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>现在，Babel 会把这样的代码：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>
	  <span class="nf">method</span><span class="p">()</span> <span class="p">{}</span>
	<span class="p">}</span>
</code></pre></div></div>
<p>编译成：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">import</span> <span class="nx">_classCallCheck</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">babel-runtime/helpers/classCallCheck</span><span class="dl">"</span><span class="p">;</span>
	<span class="k">import</span> <span class="nx">_createClass</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">babel-runtime/helpers/createClass</span><span class="dl">"</span><span class="p">;</span>

	<span class="kd">let</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
	  <span class="kd">function</span> <span class="nf">Foo</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">_classCallCheck</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">Foo</span><span class="p">);</span>
	  <span class="p">}</span>

	  <span class="nf">_createClass</span><span class="p">(</span><span class="nx">Foo</span><span class="p">,</span> <span class="p">[{</span>
		<span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">,</span>
		<span class="na">value</span><span class="p">:</span> <span class="kd">function</span> <span class="nf">method</span><span class="p">()</span> <span class="p">{}</span>
	  <span class="p">}]);</span>

	  <span class="k">return</span> <span class="nx">Foo</span><span class="p">;</span>
	<span class="p">}();</span>
</code></pre></div></div>
<p>这样就不需要把 _classCallCheck 和 _createClass 这两个助手方法放进每一个需要的文件里去了。</p>

<h2 id="配置-babel进阶">配置 Babel（进阶）</h2>

<p>大多数人使用 Babel 的内建预设就足够了，不过 Babel 提供了更多更细粒度的能力。</p>

<h1 id="手动指定插件">手动指定插件</h1>

<p>Babel 预设就是一些预先配置好的插件的集合，如果你想要做一些不一样的事情你会手动去设定插件，这和使用预设几乎完全相同。</p>

<p>首先安装插件：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">plugin</span><span class="o">-</span><span class="nx">transform</span><span class="o">-</span><span class="nx">es2015</span><span class="o">-</span><span class="nx">classes</span>
</code></pre></div></div>
<p>然后往 .babelrc 文件添加 plugins 字段。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
	<span class="o">+</span>   <span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">transform-es2015-classes</span><span class="dl">"</span>
	<span class="o">+</span>   <span class="p">]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>这能让你对正在使用的转换器进行更细致的控制。</p>

<p>完整的官方插件列表请见 Babel 插件页面。.</p>

<p>同时也别忘了看看由社区构建的其他插件。 如果你想学习如何编写自己的插件可以阅读 Babel 插件手册。</p>

<h1 id="插件选项">插件选项</h1>

<p>很多插件也有选项用于配置他们自身的行为。 例如，很多转换器都有“宽松”模式，通过放弃一些标准中的行为来生成更简化且性能更好的代码。</p>

<p>要为插件添加选项，只需要做出以下更改：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
	<span class="o">-</span>     <span class="dl">"</span><span class="s2">transform-es2015-classes</span><span class="dl">"</span>
	<span class="o">+</span>     <span class="p">[</span><span class="dl">"</span><span class="s2">transform-es2015-classes</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">loose</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}]</span>
		<span class="p">]</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>基于环境自定义 Babel
====================================================</p>

<p>巴贝尔插件解决许多不同的问题。 其中大多数是开发工具，可以帮助你调试代码或是与工具集成。 也有大量的插件用于在生产环境中优化你的代码。</p>

<p>因此，想要基于环境来配置 Babel 是很常见的。你可以轻松的使用 .babelrc 文件来达成目的。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">presets</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">es2015</span><span class="dl">"</span><span class="p">],</span>
		<span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[],</span>
	<span class="o">+</span>   <span class="dl">"</span><span class="s2">env</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">+</span>       <span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[...]</span>
	<span class="o">+</span>     <span class="p">},</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">+</span>       <span class="dl">"</span><span class="s2">plugins</span><span class="dl">"</span><span class="p">:</span> <span class="p">[...]</span>
	<span class="o">+</span>     <span class="p">}</span>
		<span class="p">}</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>Babel 将根据当前环境来开启 env 下的配置。</p>

<p>当前环境可以使用 process.env.BABEL_ENV 来获得。 如果 BABEL_ENV 不可用，将会替换成 NODE_ENV，并且如果后者也没有设置，那么缺省值是”development”。.</p>

<p>Unix</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">BABEL_ENV</span><span class="o">=</span><span class="nx">production</span> <span class="p">[</span><span class="nx">COMMAND</span><span class="p">]</span>
	<span class="nx">$</span> <span class="nx">NODE_ENV</span><span class="o">=</span><span class="nx">production</span> <span class="p">[</span><span class="nx">COMMAND</span><span class="p">]</span>
</code></pre></div></div>
<p>Windows</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">SET</span> <span class="nx">BABEL_ENV</span><span class="o">=</span><span class="nx">production</span>
	<span class="nx">$</span> <span class="p">[</span><span class="nx">COMMAND</span><span class="p">]</span>

    <span class="nx">注意</span><span class="err">：</span><span class="p">[</span><span class="nx">COMMAND</span><span class="p">]</span> <span class="nx">指的是任意一个用来运行</span> <span class="nx">Babel</span> <span class="nx">的命令</span><span class="err">（</span><span class="nx">如</span><span class="err">：</span><span class="nx">babel</span><span class="err">，</span><span class="nx">babel</span><span class="o">-</span><span class="nx">node</span><span class="err">，</span><span class="nx">或是</span> <span class="nx">node</span><span class="err">，</span><span class="nx">如果你使用了</span> <span class="nx">register</span> <span class="nx">钩子的话</span><span class="err">）。</span>

    <span class="nx">提示</span><span class="err">：</span><span class="nx">如果你想要让命令能够跨</span> <span class="nx">unix</span> <span class="nx">和</span> <span class="nx">windows</span> <span class="nx">平台运行的话</span><span class="err">，</span><span class="nx">可以使用</span> <span class="nx">cross</span><span class="o">-</span><span class="nx">env</span><span class="err">。</span><span class="p">.</span>
</code></pre></div></div>
<p>Babel 和其他工具
——————————————-</p>

<p>一旦你掌握的窍门，安装 Babel 还是十分简明的，不过和其他工具搭配在一起就会变得困难多了。 不过我们一直在与其他项目密切合作以确保这种体验尽可能简单。</p>

<h1 id="静态分析工具">静态分析工具</h1>

<p>新标准为语言带来了许多新的语法，静态分析工具正在将此利用起来。</p>

<h1 id="语法检查linting">语法检查（Linting）</h1>

<p>ESLint 是最流行的语法检查工具之一，因此我们维护了一个官方的 babel-eslint 整合软件包。</p>

<p>首先安装 eslint 和 babel-eslint。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span><span class="o">-</span><span class="nx">dev</span> <span class="nx">eslint</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">eslint</span>

    <span class="nx">注意</span><span class="err">：</span><span class="nx">兼容</span> <span class="nx">Babel</span> <span class="mi">6</span> <span class="nx">的</span> <span class="nx">babel</span><span class="o">-</span><span class="nx">eslint</span> <span class="nx">目前正处于预发行版本</span><span class="err">。</span> <span class="nx">安装最新的</span> <span class="mf">5.0</span> <span class="nx">beta</span> <span class="nx">版来兼容</span> <span class="nx">Babel</span> <span class="mi">6</span><span class="err">。</span>
</code></pre></div></div>
<p>然后创建或使用项目现有的 .eslintrc 文件并设置 parser 为 babel-eslint。.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
	<span class="o">+</span>   <span class="dl">"</span><span class="s2">parser</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">babel-eslint</span><span class="dl">"</span><span class="p">,</span>
		<span class="dl">"</span><span class="s2">rules</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
		  <span class="p">...</span>
		<span class="p">}</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>现在添加一个 lint 任务到 npm 的 package.json 脚本中：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">my-module</span><span class="dl">"</span><span class="p">,</span>
		<span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
	<span class="o">+</span>     <span class="dl">"</span><span class="s2">lint</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eslint my-files.js</span><span class="dl">"</span>
		<span class="p">},</span>
		<span class="dl">"</span><span class="s2">devDependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
		  <span class="dl">"</span><span class="s2">babel-eslint</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">...</span><span class="dl">"</span><span class="p">,</span>
		  <span class="dl">"</span><span class="s2">eslint</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">...</span><span class="dl">"</span>
		<span class="p">}</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>接着只需要运行这个任务就一切就绪了。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">run</span> <span class="nx">lint</span>
</code></pre></div></div>
<p>详细信息请咨询 babel-eslint 或者 eslint 的文档。</p>

<h3 id="代码风格">代码风格</h3>

<p>JSCS 是一个极受欢迎的工具，在语法检查的基础上更进一步检查代码自身的风格。 Babel 和 JSCS 项目的核心维护者之一（@hzoo）维护着 JSCS 的官方集成。</p>

<p>更妙的是，JSCS 自己通过 –esnext 选项实现了这种集成，于是和 Babel 的集成就简化成了直接在命令行运行：</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nx">$</span> <span class="nx">jscs</span> <span class="p">.</span> <span class="o">--</span><span class="nx">esnext</span>
</code></pre></div></div>
<p>或者在 .jscsrc 文件里添加 esnext 选项。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="p">{</span>
		<span class="dl">"</span><span class="s2">preset</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">airbnb</span><span class="dl">"</span><span class="p">,</span>
	<span class="o">+</span>   <span class="dl">"</span><span class="s2">esnext</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
	  <span class="p">}</span>
</code></pre></div></div>
<p>详细信息请咨询 babel-jscs 或是 jscs 的文档。</p>

<h3 id="文档">文档</h3>

<p>使用 Babel，ES2015，还有 Flow 你可以对你的代码进行大量的推断。使用 documentation.js 可以非常简便地生成详细的 API 文档。</p>

<p>Documentation.js 使用 Babel 来支持所有最新的语法，包括用于在你的代码中声明类型所用的 Flow 注解在内，</p>

<h2 id="框架">框架</h2>

<p>所有主流的 JavaScript 框架都正在努力调整他们的 APIs 向这门语言的未来看齐。有鉴于此，配套工具方面已经做出了大量的工作。</p>

<p>除了使用 Babel 以外，框架更有条件去扩展 Babel 来帮助他们提升用户体验。
React</p>

<p>React 已经大幅改变了他们的 API 以适应 ES2015 的类语法（此处了解更新的 API）。 特别是 React 现在依赖 Babel 编译它的 JSX 语法且弃用了它原有的自定义工具。 你可以按照上述说明安装 babel-preset-react 包来开始。.</p>

<p>React 社区采用 Babel 并围绕它来运行，现在社区已经创建了大量的转换器（transforms）。.</p>

<p>最令人瞩目的是 babel-plugin-react-transform 插件，它集成了大量 React 专用转换器可以启用诸如 热模块重载等其他调试工具。</p>

            </article>
        </div>
      </div>
      <div class="panel docs-content">
        <article class="post-content">
          <div class="wrapper">
            


    <div id="gitment-ctn"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>

function simplePathToId(url) {
  try {
    const path = new URL(url).pathname; // 提取路径
    const cleaned = path.toLowerCase().replace(/[^a-z0-9]/g, ''); // 仅保留字母和数字
    return cleaned.slice(0, 48); // 截断保证简短
  } catch (e) {
    console.log(e)
    return ''; // 非法 URL 处理
  }
}

var gitalk = new Gitalk({
  clientID: "", //Client ID
  clientSecret: "", //Client Secret

  repo: 'youjiuzidangge.github.io',//仓库名称
  owner: 'youjiuzidangge',//仓库拥有者
  admin: ['youjiuzidangge'],
  id: simplePathToId(location.href),      // Ensure uniqueness and length less than 50
  distractionFreeMode: false  // Facebook-like distraction free mode
})
gitalk.render('gitment-ctn')
</script>



          </div>
        </article>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2025 <a href=""><code>Jason Li</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme from <a href="http://lesscss.cn/">Less</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/application.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
