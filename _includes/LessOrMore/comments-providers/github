<div id="gitment-ctn"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>

function simplePathToId(url) {
  try {
    const path = new URL(url).pathname; // 提取路径
    const cleaned = path.toLowerCase().replace(/[^a-z0-9]/g, ''); // 仅保留字母和数字
    return cleaned.slice(0, 48); // 截断保证简短
  } catch (e) {
    console.log(e)
    return ''; // 非法 URL 处理
  }
}

var gitalk = new Gitalk({
  clientID: "{{ site.auth_client }}", //Client ID
  clientSecret: "{{ site.auth_secret }}", //Client Secret

  repo: 'youjiuzidangge.github.io',//仓库名称
  owner: 'youjiuzidangge',//仓库拥有者
  admin: ['youjiuzidangge'],
  id: simplePathToId(location.href),      // Ensure uniqueness and length less than 50
  distractionFreeMode: false  // Facebook-like distraction free mode
})
gitalk.render('gitment-ctn')
</script>